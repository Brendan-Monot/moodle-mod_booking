define("mod_booking/prepageFooter",["exports","jquery","mod_booking/bookit","local_wunderbyte_table/reload"],(function(_exports,_jquery,_bookit,_reload){var obj;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initFooterButtons=function(optionid,userid){_jquery.default.each((0,_jquery.default)("[id^="+SELECTORS_MODALID+optionid+"]"),(function(){(0,_jquery.default)(this).on("hide.bs.modal",(function(){(0,_bookit.setBackModalVariables)(optionid)}))})),function(_x){_initBookingButton.apply(this,arguments)}(optionid);var elements=document.querySelectorAll("[id^="+SELECTORS_MODALID+optionid+"] "+SELECTORS_INMODALFOOTER+" a");console.log("elements",elements),elements.forEach((function(element){element&&!element.dataset.initialized&&(element.dataset.initialized=!0,element.addEventListener("click",(function(){if(!element.classList.contains("hidden")&&"true"!=element.dataset.blocked)switch(element.dataset.action){case"back":(0,_bookit.backToPreviousPage)(optionid,userid);break;case"continue":(0,_bookit.continueToNextPage)(optionid,userid);break;case"checkout":closeModal(optionid),window.location.href=element.dataset.href;break;case"closemodal":closeModal(optionid)}})))}))},_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};var SELECTORS_MODALID="sbPrePageModal_",SELECTORS_INMODALFOOTER=" div.prepage-booking-footer",SELECTORS_BOOKITBUTTON="div.booking-button-area";function _initBookingButton(){return(_initBookingButton=_asyncToGenerator(regeneratorRuntime.mark((function _callee(optionid){var modal;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(console.log("initBookingButton"),modal=document.querySelector("div.modal.show[id^="+SELECTORS_MODALID+optionid+"]")){_context.next=4;break}return _context.abrupt("return");case 4:modal.addEventListener("click",(function(e){console.log("click on modal",e.target);var button=e.target;if(button){var bookingButtonArea=e.target.closest(SELECTORS_BOOKITBUTTON);if(button=e.target.closest(".btn"),bookingButtonArea&&button&&(console.log("initBookingButton click"),"noforward"==bookingButtonArea.dataset.action))return}}));case 5:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function closeModal(optionid){_jquery.default.each((0,_jquery.default)("[id^="+SELECTORS_MODALID+optionid+"]"),(function(){(0,_jquery.default)(this).modal("hide"),(0,_reload.reloadAllTables)()}))}}));

//# sourceMappingURL=prepageFooter.min.js.map