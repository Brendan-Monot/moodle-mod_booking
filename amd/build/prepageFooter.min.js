define("mod_booking/prepageFooter",["exports","mod_booking/bookit"],(function(_exports,_bookit){function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initFooterButtons=function(optionid){(function(_x){_initBookingButton.apply(this,arguments)})(optionid),document.querySelectorAll("[id^="+SELECTORS_MODALID+optionid+"] "+SELECTORS_INMODALFOOTER+" a").forEach((function(element){element&&!element.dataset.initialized&&(element.dataset.initialized=!0,element.addEventListener("click",(function(){if(!element.classList.contains("hidden")&&"true"!=element.dataset.blocked)switch(element.dataset.action){case"back":(0,_bookit.backToPreviousPage)(optionid);break;case"continue":(0,_bookit.continueToNextPage)(optionid);break;case"checkout":window.location.href=element.dataset.href;break;case"closemodal":!function(optionid){var backdrop=document.querySelector(SELECTORS_STATICBACKDROP),modal=document.querySelector("div.modal.show[id^="+SELECTORS_MODALID+optionid+"]");modal&&modal.classList.remove("show");backdrop&&backdrop.remove()}(optionid)}})))}))};var SELECTORS_MODALID="sbPrePageModal_",SELECTORS_INMODALFOOTER=" div.prepage-booking-footer",SELECTORS_BOOKITBUTTON="div.booking-button-area",SELECTORS_STATICBACKDROP="div.modal-backdrop";function _initBookingButton(){return(_initBookingButton=_asyncToGenerator(regeneratorRuntime.mark((function _callee(optionid){var modal,selector,button;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(modal=document.querySelector("div.modal.show[id^="+SELECTORS_MODALID+optionid+"]")){_context.next=3;break}return _context.abrupt("return");case 3:if(selector=SELECTORS_BOOKITBUTTON+'[data-itemid][data-area="option"]',button=modal.querySelector(selector)){_context.next=7;break}return _context.abrupt("return");case 7:button.addEventListener("click",(function(){setTimeout((function(){(0,_bookit.continueToNextPage)(optionid)}),1500)}));case 8:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}}));

//# sourceMappingURL=prepageFooter.min.js.map