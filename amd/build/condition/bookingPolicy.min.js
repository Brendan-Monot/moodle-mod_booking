define("mod_booking/condition/bookingPolicy",["exports","core_form/dynamicform"],(function(_exports,_dynamicform){var obj;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(){return _init.apply(this,arguments)},_dynamicform=(obj=_dynamicform)&&obj.__esModule?obj:{default:obj};var SELECTOR_FORMCONTAINER=".condition-bookingpolicy-form",SELECTOR_MODALBODY=".modal-body",SELECTOR_CONTINUEBUTTON=" div.prepage-booking-footer .continue-button";function _init(){return(_init=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var container,id,dynamicForm,continuebutton,handler;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(container=document.querySelector("div.modal.show "+SELECTOR_FORMCONTAINER)){_context.next=3;break}return _context.abrupt("return");case 3:return id=container.dataset.id,dynamicForm=new _dynamicform.default(container,"mod_booking\\form\\condition\\bookingpolicy_form"),_context.next=7,dynamicForm.load({id:id});case 7:continuebutton=container.closest(SELECTOR_MODALBODY).querySelector(SELECTOR_CONTINUEBUTTON),dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED,(function(e){e.detail&&(continuebutton||(continuebutton=container.closest(SELECTOR_MODALBODY).querySelector(SELECTOR_CONTINUEBUTTON)),continuebutton&&(continuebutton.dataset.blocked="false",continuebutton.click()))})),handler=function(){dynamicForm.submitFormAjax()},dynamicForm.addEventListener("change",handler),continuebutton&&(continuebutton.dataset.blocked=!0,continuebutton.addEventListener("click",(function(){dynamicForm.submitFormAjax()})));case 12:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}}));

//# sourceMappingURL=bookingPolicy.min.js.map