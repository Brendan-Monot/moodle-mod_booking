define("mod_booking/bookingpage/prepageFooter",["exports","jquery","mod_booking/bookit","local_wunderbyte_table/reload"],(function(_exports,_jquery,_bookit,_reload){var obj;
/**
   * @module     mod_booking/prepageFooter
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initFooterButtons=function(optionid,userid){_jquery.default.each((0,_jquery.default)("[id^="+SELECTORS_MODALID+optionid+"]"),(function(){(0,_jquery.default)(this).on("hide.bs.modal",(function(){(0,_bookit.setBackModalVariables)(optionid)}))})),async function(optionid){console.log("initBookingButton");let modal=document.querySelector("div.modal.show[id^="+SELECTORS_MODALID+optionid+"]");if(!modal){if(document.querySelectorAll("div.inlineprepagearea [id^="+SELECTORS_INLINEID+optionid+"]").forEach((el=>{(function(el){var style=window.getComputedStyle(el);return"none"===style.display||"hidden"===style.visibility})(el)||(modal=el)})),!modal)return}console.log("modal",modal),modal.addEventListener("click",(e=>{console.log("click on modal",e.target);let button=e.target;if(button){const bookingButtonArea=e.target.closest(SELECTORS_BOOKITBUTTON);if(button=e.target.closest(".btn"),bookingButtonArea&&button&&(console.log("initBookingButton click"),"noforward"==bookingButtonArea.dataset.action))return}}))}(optionid);let elements=document.querySelectorAll("[id^="+SELECTORS_MODALID+optionid+"] "+SELECTORS_INMODALFOOTER+" a");0===elements.length&&(elements=document.querySelectorAll("[id^="+SELECTORS_INLINEID+optionid+"] "+SELECTORS_INMODALFOOTER+" a"));console.log("elements",elements,"[id^="+SELECTORS_INLINEID+optionid+"] "+SELECTORS_INMODALFOOTER+" a"),elements.forEach((element=>{element&&!element.dataset.initialized&&(element.dataset.initialized=!0,element.addEventListener("click",(()=>{if(element.classList.contains("hidden"))return;if("true"==element.dataset.blocked)return;switch(element.dataset.action){case"back":(0,_bookit.backToPreviousPage)(optionid,userid);break;case"continue":(0,_bookit.continueToNextPage)(optionid,userid);break;case"checkout":closeModal(optionid),window.location.href=element.dataset.href;break;case"closemodal":closeModal(optionid)}})))}))},_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};var SELECTORS_MODALID="sbPrePageModal_",SELECTORS_INLINEID="sbPrePageInline_",SELECTORS_INMODALFOOTER=" div.prepage-booking-footer",SELECTORS_BOOKITBUTTON="div.booking-button-area";function closeModal(optionid){_jquery.default.each((0,_jquery.default)("[id^="+SELECTORS_MODALID+optionid+"]"),(function(){(0,_jquery.default)(this).modal("hide"),(0,_reload.reloadAllTables)()}))}}));

//# sourceMappingURL=prepageFooter.min.js.map