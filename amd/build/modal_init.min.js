define ("mod_booking/modal_init",["exports","core/ajax","core/templates","core/notification"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.getBookingOptionDescription=a.init=void 0;b=e(b);c=e(c);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}a.init=function init(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,b=[];if(null===a){b=document.querySelectorAll("[id^=bo_modal_spinner]")}else{b=[document.querySelector("[id^=bo_modal_spinner_"+a+"]")]}b.forEach(function(a){var b,c=a.dataset.optionid,d=null!==(b=a.dataset.userid)&&void 0!==b?b:0;f(c,d,h)})};function f(a,b,c){var d=document.getElementById("bo_modal_spinner_"+a),e=new MutationObserver(function(){if(!g(d)){this.disconnect();c(a,b)}});while(null!==d){if(!g(d)){d=d.parentElement}else{if(d.dataset.observed){return}e.observe(d,{attributes:!0});d.dataset.observed=!0;return}}c(a,b)}function g(a){var b=window.getComputedStyle(a);return"none"===b.display||"hidden"===b.visibility}var h=function(a,e){var f=document.getElementById("bo_modal_description_"+a),g=document.querySelector("#bo_modal_spinner_"+a+" .spinner-border");if(g){g.classList.remove("hidden")}if(f){f.classList.add("hidden")}b.default.call([{methodname:"mod_booking_get_booking_option_description",args:{optionid:a,userid:e},done:function done(b){var e=document.querySelector("#bo_modal_spinner_"+a+" .spinner-border"),f=document.getElementById("bo_modal_description_"+a),g=JSON.parse(b.content);c.default.renderForPromise(b.template,g).then(function(b){var d=b.html,g=b.js;c.default.appendNodeContents("#bo_modal_description_"+a,d,g);e.classList.add("hidden");f.classList.remove("hidden");return!0}).catch(function(a){d.default.addNotification({message:"failed rendering "+a,type:"danger"})});e.classList.add("hidden");f.classList.remove("hidden");return!0},fail:function fail(a){console.log(a);g.classList.add("hidden");f.classList.remove("hidden")}}])};a.getBookingOptionDescription=h});
//# sourceMappingURL=modal_init.min.js.map
