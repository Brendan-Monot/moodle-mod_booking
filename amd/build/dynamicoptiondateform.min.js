define ("mod_booking/dynamicoptiondateform",["exports","core_form/dynamicform","core/templates"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.datelistinit=a.init=void 0;b=d(b);c=d(c);function d(a){return a&&a.__esModule?a:{default:a}}var f=new b.default(document.querySelector("#optiondates-form"),"mod_booking\\form\\dynamicoptiondateform");a.init=function init(a,b,d){f.load({cmid:a,bookingid:b,optionid:d}).then(function(){g()}).catch(function(a){return displayException(a)});f.addEventListener(f.events.FORM_SUBMITTED,function(h){var e=document.getElementsByName("chooseperiod")[0].value,i=document.getElementsByName("reoccurringdatestring")[0].value;f.load({cmid:a,bookingid:b,optionid:d}).then(function(){h.preventDefault();var a=h.detail;c.default.renderForPromise("mod_booking/bookingoption_dates",a).then(function(a){var b=a.html;document.querySelector(".optiondates-list").innerHTML="";c.default.appendNodeContents(".optiondates-list",b)}).catch(function(a){return displayException(a)});var b=document.getElementsByClassName("optiondates-list");while(1<b.length){b[b.length-1].parentNode.removeChild(b[b.length-1])}g();document.getElementsByName("chooseperiod")[0].value=e;document.getElementsByName("reoccurringdatestring")[0].value=i;document.querySelector("#semesterid").value=e;document.querySelector("#dayofweektime").value=i}).catch(function(a){return displayException(a)})})};var g=function(){var a=document.querySelector("#optiondates-form"),b=document.querySelector(".optiondates-list");b.parentNode.removeChild(b);a.parentNode.insertBefore(b,a.nextSibling);b.addEventListener("click",function(a){var b=a.target.dataset.action,c=a.target.dataset.targetid;if("delete"===b){a.target.closest("li").remove();document.getElementById(c).remove()}if("add"===b){var d=a.target.closest("li"),e=document.querySelector("#meeting-time"),f="<li><span class=\"badge bg-primary\">"+e.value+"</span> <i class=\"fa fa-trash ml-2 icon-red\" data-action=\"delete\"></i></li>";d.insertAdjacentHTML("afterend",f)}});document.getElementsByName("chooseperiod")[0].addEventListener("change",function(a){document.querySelector("#semesterid").value=a.target.value});document.getElementsByName("reoccurringdatestring")[0].addEventListener("keyup",function(a){var b=document.querySelector("#optiondates-form input[name=\"submitbutton\"]");if("block"===a.target.value.trim().toLowerCase()){b.disabled=!0}else{b.disabled=!1}document.querySelector("#dayofweektime").value=a.target.value})};a.datelistinit=g});
//# sourceMappingURL=dynamicoptiondateform.min.js.map
